```
     ┌──────┐                     ┌──────┐
     │Client│                     │Server│
     └──┬───┘                     └──┬───┘
        │                            │
        │                        ╔═══╧═══════════╗
════════╪════════════════════════╣ Initialization╠═════════════════════════════════
        │                        ╚═══╤═══════════╝
        │                            │
        │           Connect          │
        │ ───────────────────────────>
        │                            │
        │                            │────┐
        │                            │    │ Serialize state
        │                            │<───┘
        │                            │
        │         Send state         │
        │ <───────────────────────────
        │                            │
        │────┐                       │
        │    │ Unpack state          │
        │<───┘                       │
        │                            │
        │         Acknowledge        │
        │ ───────────────────────────>
        │                            │
        │                            │────┐
        │                            │    │ Check trip time
        │                            │<───┘
        │                            │
        │                            │
        │                          ╔═╧═════════╗
════════╪══════════════════════════╣ User Event╠═══════════════════════════════════
        │                          ╚═╤═════════╝
        │                            │
        │────┐
        │    │ Enqueue event to output
        │<───┘
        │                            │
        │                            │
        │                            │╔═════╗
════════╪════════════════════════════╪╣ Tick╠══════════════════════════════════════
        │                            │╚═════╝
        │                            │
        │                            │────┐
        │                            │    │ Check clients state
        │                            │<───┘
        │                            │
        │                            │
        │               ╔══════╤═════╪══════════════════════════════════╗
        │               ║ ALT  │  Client ack not received               ║
        │               ╟──────┘     │                                  ║
        .               ║            .                                  ║
        .            Hang            .                                  ║
        .               ║            .                                  ║
        .               ║            .                                  ║
        .               ║            .                                  ║
        │               ║            │────┐                             ║
        │               ║            │    │ Disconnect node             ║
        │               ║            │<───┘                             ║
        │               ║            │                                  ║
        │               ║            │────┐                             ║
        │               ║            │    │ Enqueue disconnect event    ║
        │               ║            │<───┘                             ║
        │               ╚════════════╪══════════════════════════════════╝
        │                            │
        │                            │────┐
        │                            │    │ Increment tick ID
        │                            │<───┘
        │                            │
        │       Send tick data       │
        │ <───────────────────────────
        │                            │
        │                            │────┐
        │                            │    │ Run machine with input
        │                            │<───┘
        │                            │
        │                            │────┐
        │                            │    │ Enqueue output
        │                            │<───┘
        │                            │
        │────┐                       │
        │    │ Enqueue tick to input │
        │<───┘                       │
        │                            │
        │    Ack tick with output    │
        │ ───────────────────────────>
        │                            │
        │                            │
        │                          ╔═╧═════════╗
════════╪══════════════════════════╣ ClientTick╠═══════════════════════════════════
        │                          ╚═╤═════════╝
        │                            │
        │────┐                       │
        │    │ Check input buffer    │
        │<───┘                       │
        │                            │
        .                            .
        .            Hang            .
        .                            .
        .                            .
        .                            .
        │────┐                       │
        │    │ Run machine with input│
        │<───┘                       │
        │                            │
        │────┐                       │
        │    │ Enqueue output        │
        │<───┘                       │
     ┌──┴───┐                     ┌──┴───┐
     │Client│                     │Server│
     └──────┘                     └──────┘
```
